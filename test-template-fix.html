<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test EmailJS Template - Fix Required</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 30px auto;
            padding: 20px;
            background: #0f172a;
            color: #e2e8f0;
        }
        .container {
            background: #1e293b;
            padding: 30px;
            border-radius: 12px;
            border: 1px solid #334155;
        }
        h1 {
            color: #ef4444;
            margin-bottom: 10px;
        }
        .critical-fix {
            background: #7f1d1d;
            border: 3px solid #ef4444;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .critical-fix h2 {
            color: #fca5a5;
            margin-top: 0;
        }
        .template-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .wrong, .correct {
            padding: 20px;
            border-radius: 8px;
        }
        .wrong {
            background: #7f1d1d;
            border: 2px solid #ef4444;
        }
        .wrong h3 {
            color: #fca5a5;
        }
        .correct {
            background: #064e3b;
            border: 2px solid #10b981;
        }
        .correct h3 {
            color: #86efac;
        }
        pre {
            background: #0f172a;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 10px 0;
            font-size: 14px;
        }
        .variable-highlight {
            background: #fbbf24;
            color: #0f172a;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #2563eb;
        }
        button.emailjs-button {
            background: #f97316;
        }
        button.emailjs-button:hover {
            background: #ea580c;
        }
        .test-section {
            background: #1f2937;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        input {
            width: 100%;
            padding: 10px;
            background: #0f172a;
            color: #e2e8f0;
            border: 1px solid #334155;
            border-radius: 6px;
            font-size: 16px;
            margin: 10px 0;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }
        .result.success {
            background: #064e3b;
            border: 1px solid #10b981;
            color: #86efac;
            display: block;
        }
        .result.error {
            background: #7f1d1d;
            border: 1px solid #ef4444;
            color: #fca5a5;
            display: block;
        }
        .instructions {
            background: #1e3a8a;
            border: 2px solid #3b82f6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        .instructions li {
            margin: 10px 0;
        }
        code {
            background: #0f172a;
            padding: 2px 6px;
            border-radius: 3px;
            color: #fbbf24;
            font-family: 'Courier New', monospace;
        }
        .warning-icon {
            font-size: 48px;
            text-align: center;
            color: #ef4444;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö†Ô∏è EmailJS Template Fix Required!</h1>
        
        <div class="critical-fix">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <h2>YOUR TEMPLATE HAS A SYNTAX ERROR!</h2>
            <p><strong>Problem:</strong> Your template is using SINGLE curly braces <code>{variable}</code></p>
            <p><strong>Solution:</strong> EmailJS requires DOUBLE curly braces <code>{{variable}}</code></p>
        </div>

        <div class="template-comparison">
            <div class="wrong">
                <h3>‚ùå WRONG (Your Current Template)</h3>
                <pre>Subject:
It's TIME for TEXAS FOOTBALL - <span class="variable-highlight">{Opposing Team}</span> - <span class="variable-highlight">{Game Date}</span> at <span class="variable-highlight">{Time}</span>

Content:
We are hosting a tailgate for the <span class="variable-highlight">{Opposing Team}</span> game at <span class="variable-highlight">{Game Date}</span> at <span class="variable-highlight">{Time}</span>.</pre>
            </div>
            
            <div class="correct">
                <h3>‚úÖ CORRECT (What it Should Be)</h3>
                <pre>Subject:
It's TIME for TEXAS FOOTBALL - <span class="variable-highlight">{{Opposing Team}}</span> - <span class="variable-highlight">{{Game Date}}</span> at <span class="variable-highlight">{{Time}}</span>

Content:
We are hosting a tailgate for the <span class="variable-highlight">{{Opposing Team}}</span> game at <span class="variable-highlight">{{Game Date}}</span> at <span class="variable-highlight">{{Time}}</span>.</pre>
            </div>
        </div>

        <div class="instructions">
            <h2>üîß How to Fix Your Template</h2>
            <ol>
                <li>
                    <strong>Open EmailJS Dashboard</strong><br>
                    <button class="emailjs-button" onclick="window.open('https://dashboard.emailjs.com/admin/templates', '_blank')">
                        Open EmailJS Templates ‚Üí
                    </button>
                </li>
                <li>
                    <strong>Edit template <code>template_teeze8x</code></strong>
                </li>
                <li>
                    <strong>In the Subject field, change:</strong><br>
                    <code>{Opposing Team}</code> ‚Üí <code>{{Opposing Team}}</code><br>
                    <code>{Game Date}</code> ‚Üí <code>{{Game Date}}</code><br>
                    <code>{Time}</code> ‚Üí <code>{{Time}}</code>
                </li>
                <li>
                    <strong>In the Content field, change ALL instances of:</strong><br>
                    <code>{Opposing Team}</code> ‚Üí <code>{{Opposing Team}}</code><br>
                    <code>{Game Date}</code> ‚Üí <code>{{Game Date}}</code><br>
                    <code>{Time}</code> ‚Üí <code>{{Time}}</code>
                </li>
                <li>
                    <strong>Save the template</strong>
                </li>
            </ol>
            <p><strong>‚ö†Ô∏è IMPORTANT:</strong> You need DOUBLE curly braces <code>{{ }}</code> not single <code>{ }</code></p>
        </div>

        <div class="test-section">
            <h2>üß™ Test After Fixing</h2>
            <p>Once you've added the double curly braces in EmailJS, test here:</p>
            
            <input type="email" id="testEmail" placeholder="Enter your email address">
            
            <button onclick="sendTestEmail()">Send Test Email</button>
            
            <div id="result" class="result"></div>
        </div>

        <div class="instructions" style="background: #064e3b; border-color: #10b981;">
            <h2>‚úÖ What the Working Template Should Look Like</h2>
            <pre style="color: #86efac;">Subject: It's TIME for TEXAS FOOTBALL - {{Opposing Team}} - {{Game Date}} at {{Time}}

Content:
[Longhorn Logo]

It is that time again. We are hosting a tailgate for the {{Opposing Team}} game at {{Game Date}} at {{Time}}.

Click the link below to go to our mobile friendly tailgate site to see the menu and sign up for potluck items.

[Open Tailgate Website Button]

Feel free to reach out with any questions. Looking forward to seeing you.

Best regards,
Maurie and Corby

Hook'em!</pre>
        </div>
    </div>

    <script type="module">
        import { emailService } from './src/services/emailService.ts';
        
        window.sendTestEmail = async function() {
            const email = document.getElementById('testEmail').value;
            if (!email) {
                alert('Please enter your email address');
                return;
            }
            
            const result = document.getElementById('result');
            result.className = 'result error';
            result.style.display = 'block';
            result.innerHTML = 'üìß Sending test email...';
            
            // Prepare data with exact field names (capital letters and spaces)
            const testData = {
                recipientEmail: email,
                recipientName: 'Test User',
                opponent: 'Oklahoma',
                gameDate: 'October 11, 2025',
                gameTime: '2:30 PM',
                gameName: 'Texas vs Oklahoma',
                location: 'Cotton Bowl, Dallas, TX',
                theme: 'Red River Rivalry',
                setupTime: '10:00 AM',
                specialNotes: 'Testing after template fix!',
                rsvpLink: 'https://texastailgaters.com/games'
            };
            
            try {
                // We'll send with field names exactly as they appear in the template
                const response = await emailService.sendGameInvitation(testData);
                
                if (response.success) {
                    result.className = 'result success';
                    result.innerHTML = `
                        ‚úÖ <strong>Email sent successfully!</strong><br>
                        Check ${email} for the invitation.<br><br>
                        If the fields show actual values: Your template is fixed!<br>
                        If you still see {Opposing Team} etc: You need to add the second curly brace.
                    `;
                } else {
                    result.className = 'result error';
                    result.innerHTML = `
                        ‚ùå <strong>Failed to send</strong><br>
                        ${response.message}<br><br>
                        Make sure you've saved the template with double curly braces.
                    `;
                }
            } catch (error) {
                result.className = 'result error';
                result.innerHTML = `
                    ‚ùå <strong>Error:</strong> ${error.message || error}<br>
                    Check the console for details.
                `;
                console.error('Test error:', error);
            }
        };
        
        // Also update the emailService to send the exact field names
        console.log('%c‚ö†Ô∏è Template Fix Required!', 'color: #ef4444; font-size: 20px; font-weight: bold');
        console.log('%cYour template uses {variable} but needs {{variable}}', 'color: #fbbf24; font-size: 16px');
        console.log('Change all single curly braces to double curly braces in EmailJS');
    </script>
</body>
</html>