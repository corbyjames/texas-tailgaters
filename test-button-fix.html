<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Button Fix</title>
    <style>
        body {
            font-family: -apple-system, system-ui, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            background: #10b981;
            color: white;
        }
        .error {
            background: #ef4444;
            color: white;
        }
        .info {
            background: #3b82f6;
            color: white;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
            border: none;
            background: #f97316;
            color: white;
        }
        button:hover {
            background: #ea580c;
        }
    </style>
</head>
<body>
    <h1>Testing "I'll bring this" Button Fix</h1>
    <p>This test verifies the button works on all screens after the fix.</p>

    <div class="test-section">
        <h2>Test Checklist</h2>
        <p>Please manually verify the following:</p>
        
        <h3>1. Potluck Page</h3>
        <ul>
            <li>✅ "I'll bring this" button shows for unassigned items</li>
            <li>✅ Clicking button on quantity items shows modal</li>
            <li>✅ Clicking button on single items assigns immediately</li>
            <li>✅ "Cancel" button shows for your assignments</li>
            <li>✅ "Fully Claimed" badge shows when quantity reached</li>
            <li>✅ Progress bars show for quantity items</li>
        </ul>

        <h3>2. Game Details Page</h3>
        <ul>
            <li>✅ Same button logic as Potluck Page</li>
            <li>✅ PotluckSignupModal works for quantity items</li>
            <li>✅ Buttons have stopPropagation to prevent parent clicks</li>
            <li>✅ Quantity tracking displays properly</li>
        </ul>

        <h3>3. Mobile Views</h3>
        <ul>
            <li>✅ Mobile game cards navigate to potluck page (correct behavior)</li>
            <li>✅ Potluck page works on mobile viewport</li>
            <li>✅ Buttons are touch-friendly on mobile</li>
        </ul>

        <div class="status info">
            <strong>Summary of Changes:</strong><br>
            1. Fixed GameDetailsPage to use same button logic as PotluckPage<br>
            2. Added PotluckSignupModal import and state to GameDetailsPage<br>
            3. Updated handleAssign to handle quantities<br>
            4. Added proper quantity tracking display<br>
            5. Mobile cards correctly navigate to potluck page
        </div>
    </div>

    <div class="test-section">
        <h2>Code Changes Applied</h2>
        <pre style="background: #f3f4f6; padding: 10px; border-radius: 4px; overflow-x: auto;">
// GameDetailsPage.tsx changes:

1. Added import:
import { PotluckSignupModal } from '../components/potluck/PotluckSignupModal';

2. Added state:
const [signupItem, setSignupItem] = useState&lt;PotluckItem | null&gt;(null);

3. Updated handleAssign:
const handleAssign = async (item: PotluckItem, quantity?: number) => {
  // Now handles quantity tracking properly
  const hasQuantityTracking = (item.quantityNeeded || 1) > 1;
  ...
};

4. Updated button rendering logic:
- Checks for quantity tracking
- Shows modal for quantity items
- Shows "Fully Claimed" when appropriate
- Has stopPropagation on all click handlers

5. Added PotluckSignupModal component at end
        </pre>
    </div>

    <div class="test-section">
        <h2>Quick Navigation</h2>
        <button onclick="window.open('http://localhost:5173/potluck', '_blank')">
            Open Potluck Page
        </button>
        <button onclick="window.open('http://localhost:5173/games', '_blank')">
            Open Games Page
        </button>
        <button onclick="testGameDetails()">
            Test Game Details
        </button>
    </div>

    <script>
        function testGameDetails() {
            // Navigate to first game details
            fetch('http://localhost:5173/games')
                .then(() => {
                    window.open('http://localhost:5173/games', '_blank');
                    alert('Click on "View Details" for any game to test the button on that page');
                })
                .catch(err => {
                    alert('Make sure the dev server is running: npm run dev');
                });
        }

        // Auto-check if dev server is running
        fetch('http://localhost:5173')
            .then(() => {
                document.body.insertAdjacentHTML('afterbegin', 
                    '<div class="status success">✅ Dev server is running</div>');
            })
            .catch(() => {
                document.body.insertAdjacentHTML('afterbegin', 
                    '<div class="status error">❌ Dev server not running. Run: npm run dev</div>');
            });
    </script>
</body>
</html>